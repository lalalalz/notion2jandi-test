---
title: "회원 탈퇴 처리 (1)"
date: 2026-01-12
lastEdited: 2026-01-12
notionId: 2e66530a-99b0-802f-adaa-e72090745499
---


## 1. 회원 탈퇴를 어떻게 구현하는게 좋을까?

- 회원 탈퇴 시 고려되어야 하는 부분은 게시글, 댓글을 어떻게 제거해야 할지이다.

## 2. 정해진 것들

- 회원은 Soft Delete 방식으로 탈퇴 구현
- 회원의 게시글, 댓글을 모두 제거
- 삭제된 댓글에도 대댓글 달 수 있음

## 3. 게시글, 댓글 제거 방안


|                    | 설명                                                             | 장점                                                                                                                                        | 단점                                                                                                                                   |
| ------------------ | -------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------ |
| 동기처리, 트랜잭션 스크립트 패턴 | 회원 서비스 로직에서 게시글, 댓글 서비스 로직을 동기적으로 실행                           | ✅ 구현이 가장 간단함 - 추가 인프라 불필요
✅ 원자성 보장 - 트랜잭션으로 모두 성공/실패 처리
✅ 즉시 반영 - 탈퇴 즉시 데이터 삭제
✅ 디버깅 용이 - 실행 흐름이 명확함

                                    | ❌ 응답 시간 증가 - 게시글/댓글이 많으면 사용자 대기 시간 길어짐
❌ 트랜잭션 타임아웃 위험 - 대량 데이터 처리 시 타임아웃 발생 가능
❌ DB 락 발생 - 삭제 중 다른 트랜잭션 대기
❌ 확장성 부족 - 데이터 증가 시 성능 저하 |
| 비동기 이벤트 방식         | 회원 서비스에서 이벤트를 발행하고 각 게시글, 댓글에서 해당 이벤트를 수신하여 처리하는 구조            | ✅ 빠른 응답 시간 - 회원 비활성화만 하고 즉시 반환
✅ 사용자 경험 개선 - 대기 시간 최소화
✅ 시스템 부하 분산 - 백그라운드에서 처리
✅ 확장성 우수 - 데이터 증가해도 사용자에게 영향 없음
✅ 유연성 - 삭제 로직 독립적으로 관리 가능 | ❌ 일관성 문제 - 짧은 시간 동안 회원은 비활성화지만 게시글은 남아있음
❌ 실패 처리 복잡 - 이벤트 처리 실패 시 재시도 로직 필요
❌ 구현 복잡도 증가 - 이벤트 인프라 필요
❌ 디버깅 어려움 - 비동기 실행으로 추적 어려움     |
| 게이트웨이 방식           | 회원 서비스 로직에서 게시글, 댓글 API 호출을 통해 위임하는 구조                         | ✅ 도메인 독립성 - 각 도메인이 자신의 삭제 로직 관리
✅ 헥사고널 아키텍처 준수 - Port-Adapter 패턴 유지
✅ 테스트 용이 - Gateway를 Mock으로 대체 가능
✅ 확장성 - MSA 전환 시 쉽게 분리               | ❌ 오버엔지니어링 가능성 - 단일 모놀리스에서는 과도할 수 있음
❌ 트랜잭션 경계 모호 - 각 Gateway 호출이 별도 트랜잭션일 수 있음
❌ 성능 오버헤드 - 여러 서비스 호출로 인한 네트워크 비용                     |
| 배치 + 스케줄링          | 탈퇴한 회원 정보를 큐 같은 곳에 추가해놓고 배치 + 스케줄러를 통해 해당 회원의 게시글과 댓글을 제거하는 구조 | ✅ 대량 데이터 처리 최적화 - 페이징으로 나눠서 처리
✅ 재시도 메커니즘 - 실패 시 자동 재시도
✅ 모니터링 용이 - 삭제 작업 상태 추적 가능
✅ 시스템 부하 제어 - 실행 시간대 조절 가능                             | ❌ 구현 복잡도 가장 높음 - Queue, Scheduler, 상태 관리 필요
❌ 즉시성 부족 - 스케줄러 주기만큼 지연
❌ 인프라 필요 - DB 테이블 또는 메시지 큐 필요                                    |

- 일단 현재 트래픽이 거의 없는 상태라 회원 탈퇴, 게시글, 댓글의 양이 많지 않기 때문에 동기처리가 아닌 방식은 현시점에서 이점을 크게 가져갈 수 없다고 판단하였다.
- 따라서, 동기처리 방식과 게이트웨이 방식을 조합한 방식을 사용하도록 결정하였다.
- 현재 도멘인 별로 구별된 헥사고날 아키텍처를 사용하고 있고, 모놀로식 프로젝트 구조이기 때문에 게이트웨이 방식을 사용하되, 어댑터에서 API 요청이 아닌 타 도메인의 서비스 로직을 호출하는 구조를 선택하였다.
- 추후 MSA 구조로 전환되면 어댑터만 수정하면 되므로 회원 도메인의 서비스 로직은 영향을 받지 않는다.

## 작업해야 할 것들


---

- 회원 제거 (Soft Delete)
    - ~~동장 조회 시 탈퇴한 회원인 경우 미 조회 되도록 처리~~
- 댓글 제거 (Soft Delete)
    - ~~필드 추가~~
    - ~~제거 로직 수정~~
    - 댓글 조회 시 제거 댓글 구분 필드 포함 전달
    - 조회할 때, 제거된 댓글인지 확인하여 조회
- 게시글 제거 (Soft Delete)
    - ~~필드 추가~~
    - ~~제거 로직 수정~~
    - 게시글 조회 시 제거 댓글 구분 필드 포함 전달
    - ~~조회할 때, 제거된 게시글인지 확인하여 조회~~
- ~~알림 발송시 제거된 게시글(댓글 또는 답글 단 경우), 댓글인 경우엔 미 발송되도록 처리~~
    - ~~좋아요~~
    - ~~댓글 또는 답글~~
